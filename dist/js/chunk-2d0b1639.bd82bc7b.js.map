{"version":3,"sources":["webpack:///./src/components/auth/login/Login.vue?daab","webpack:///src/components/auth/login/Login.vue","webpack:///./src/components/auth/login/Login.vue?0bf3","webpack:///./src/components/auth/login/Login.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","_v","attrs","on","socialLogin","staticRenderFns","firebaseConfig","JSON","parse","initializeApp","components","methods","auth","signOut","then","alert","catch","error","console","log","that","apps","length","provider","GoogleAuthProvider","setCustomParameters","prompt","signInWithPopup","res","token","credential","idToken","email","user","document","cookie","displayName","Date","getTime","slice","str","match","a","post","response","btoa","data","authToken","newUser","$router","push","name","e","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,0BAA0B,CAACF,EAAG,MAAM,CAACE,YAAY,uDAAuD,CAACF,EAAG,MAAM,CAACE,YAAY,+CAA+CC,YAAY,CAAC,SAAW,WAAW,IAAM,QAAQ,CAACP,EAAIQ,GAAG,mCAAmCJ,EAAG,YAAY,CAACK,MAAM,CAAC,MAAQ,QAAQC,GAAG,CAAC,MAAQV,EAAIW,cAAc,CAACX,EAAIQ,GAAG,cAAc,GAAGR,EAAIQ,GAAG,4CAA4CJ,EAAG,gBAAgB,MAChiBQ,EAAkB,G,0CCoBlBC,EAAiBC,KAAKC,MAAM,uWAChC,IAASC,cAAcH,GAER,OACbI,WAAY,GACZ,OACE,MAAM,IAGRC,QAAS,CACP,UACE,IAASC,OAAOC,UACbC,MAAK,WACJC,MAAM,iBAEPC,OAAM,SAASC,GACdC,QAAQC,IAAIF,OAGlB,cACE,MAAMG,EAAO1B,KACR,IAAS2B,KAAKC,QAAQ,IAASb,cAAc,IAClD,MAAMc,EAAW,IAAI,IAASX,KAAKY,mBACnCD,EAASE,oBAAoB,CAC3BC,OAAQ,mBAEV,IAASd,OAAOe,gBAAgBJ,GAAUT,KAAMc,IAChD,IAAIC,EAAQD,EAAIE,WAAWC,QACvBC,EAAQJ,EAAIK,KAAKD,MACrBE,SAASC,OAAS,YAAYP,EAAIK,KAAKG,yBAAwB,IAAIC,MAAOC,UAAY,SACtFJ,SAASC,OAAS,WAAWH,eAAkB,IAAIK,MAAOC,UAAY,SACtEJ,SAASC,OAAS,WAAWP,EAAIK,KAAKD,MAAMO,MAAM,EAAE,gBAAe,IAAIF,MAAOC,UAAY,SAC1F,IAAIE,EAAMR,EAAMS,MAAM,2BACb,OAAND,EACA,IAAS5B,OAAOC,UAAUC,MAAK,WAC9BC,MAAM,yCAIN,EAAA2B,EACGC,KAAK,uDAAwD,CAACZ,QAASF,IACvEf,MAAK,SAAS8B,GACbV,SAASC,OAAS,UAAUU,KAAKD,EAASE,KAAKC,wBAAuB,IAAIV,MAAOC,UAAY,SAE5FM,EAASE,KAAKE,QAAqD5B,EAAK6B,QAAQC,KAAK,CAAEC,KAAM,WAArE/B,EAAK6B,QAAQC,KAAK,CAAEC,KAAM,iBACpDnC,MAAOoC,IACNrC,MAAM,0BACNmB,SAASC,OAAS,qBAAoB,IAAIE,MAAOC,UACjDpB,QAAQC,IAAIiC,OAInBpC,OAAM,SAASoC,GAChBlC,QAAQC,IAAIiC,SC1EwL,I,YCOtMC,EAAY,eACd,EACA7D,EACAa,GACA,EACA,KACA,KACA,MAIa,aAAAgD,E","file":"js/chunk-2d0b1639.bd82bc7b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex justify--center\"},[_c('div',{staticClass:\"flex xs12 justify--center row align-content--center\"},[_c('div',{staticClass:\"d-flex justify--center align-content--center\",staticStyle:{\"position\":\"absolute\",\"top\":\"50%\"}},[_vm._v(\" Gotta insert BITS Pilani logo \"),_c('va-button',{attrs:{\"color\":\"info\"},on:{\"click\":_vm.socialLogin}},[_vm._v(\"Sign in\")])],1),_vm._v(\" Please use Desktop/Laptop only to view \"),_c('router-view')],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"d-flex justify--center\">\n    <div class=\"flex xs12 justify--center row align-content--center\">\n      <div\n        class=\"d-flex justify--center align-content--center\"\n        style=\"position: absolute; top: 50%\"\n      >\n        Gotta insert BITS Pilani logo\n        <va-button @click=\"socialLogin\" color=\"info\">Sign in</va-button>\n      </div>\n      Please use Desktop/Laptop only to view\n      <router-view />\n    </div>\n  </div>\n</template>\n\n<script src=\"https://apis.google.com/js/platform.js\" async defer></script>\n<script>\nimport axios from 'axios'\nimport firebase from 'firebase'\n\nvar firebaseConfig = JSON.parse(process.env.VUE_APP_AUTH_FIRE)\nfirebase.initializeApp(firebaseConfig);\n\nexport default {\n  components: {},\n  data () {\n    return{\n    }\n  },\n  methods: {\n    signOut() {\n      firebase.auth().signOut()\n        .then(function() {\n          alert('Signed out')\n        })\n        .catch(function(error) {\n          console.log(error)\n        });\n    },\n    socialLogin() {\n      const that = this\n      if (!firebase.apps.length) firebase.initializeApp({});\n      const provider = new firebase.auth.GoogleAuthProvider();\n      provider.setCustomParameters({\n        prompt: 'select_account'\n      });\n      firebase.auth().signInWithPopup(provider).then((res)=> {\n      var token = res.credential.idToken;\n      var email = res.user.email\n      document.cookie = `userName=${res.user.displayName}; expires=${new Date().getTime() + 86400*1000*30}`\n      document.cookie = `emailID=${email}; expires=${new Date().getTime() + 86400*1000*30}`\n      document.cookie = `shortID=${res.user.email.slice(1,9)}; expires=${new Date().getTime() + 86400*1000*30}`\n      var str = email.match(/@goa.bits-pilani.ac.in/i)\n      if(str===null)\n        {firebase.auth().signOut().then(function() {\n          alert('Please signin using BITSmail only!')\n        })}\n      else\n        {\n          axios\n            .post('https://csa.devsoc.club/api/v1/google/student/signin', {idToken: token})\n            .then(function(response) {\n              document.cookie = `uToken=${btoa(response.data.authToken)}; expires=${new Date().getTime() + 86400*1000*30}`\n              // alert(document.cookie);\n              !response.data.newUser ? that.$router.push({ name: 'dashboard' }) : that.$router.push({ name: 'signup' })})\n            .catch((e) => {\n              alert('Please try again later')\n              document.cookie = `uToken=; expires=${new Date().getTime()}`\n              console.log(e)\n            })\n        }\n      })\n      .catch(function(e) {\n      console.log(e);\n      });\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\">\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=5e39b6e8&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}